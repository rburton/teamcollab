<turbo-stream action="append" target="chatMessages">
    <template>
        <div class="flex items-start" th:classappend="${message.username != null} ? ' justify-end'">
            <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white mr-2"
                 th:text="${#strings.substring(message.username, 0, 1)}">
            </div>
            <div class="bg-blue-100 p-3 rounded-lg max-w-[70%]">
                <p class="text-sm font-semibold text-blue-800"
                   th:text="${message.username + (message.assistantName != null ? ' - ' + message.assistantName : '')}">
                </p>
                <p class="text-gray-800" 
                   th:attr="data-controller='message', data-message-content-value=${message.content}, data-message-target='message'"></p>
                <p class="text-xs text-gray-500 mt-1"
                   th:text="${#temporals.format(message.createdAt, 'MMM dd, yyyy, hh:mm a')}">
                </p>
            </div>
        </div>
    </template>
</turbo-stream>
